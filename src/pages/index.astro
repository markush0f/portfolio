---
import Navbar from "../components/navbar.astro";
import Experience from "../components/experience.astro";
import Home from "../components/home.astro";
import Layout from "../layouts/Layout.astro";
import "aos/dist/aos.css";
import Technologies from "../components/technologies.astro";
import Projects from "../components/projects.astro";
import AboutMe from "../components/aboutMe.astro";
import Education from "../components/education.astro";
import Footer from "../components/footer.astro";
import Certificates from "../components/certificates.astro";
import ChatbotBubble from "../components/chatbot/ChatbotBubble";
---

<Layout>
  <Navbar />
  <main>
    <ChatbotBubble client:load />
    <section id="home" class="relative">
      <Home />

      <!-- Scroll button INSIDE the home section -->
      <div
        class="absolute bottom-10 w-full flex justify-center animate-bounce z-50"
      >
        <button id="scroll-button" class="focus:outline-none">
          <img src="/down.svg" alt="down icon" class="w-20 cursor-pointer" />
        </button>
      </div>
    </section>

    <section id="aboutme" data-aos="fade-up">
      <AboutMe />
      <Education />
    </section>
    <section id="experience" data-aos="fade-up">
      <Experience />
    </section>
    <section id="projects" data-aos="fade-up" class="py-20">
      <Projects />
    </section>
    <section id="certificates" data-aos="fade-up">
      <Certificates />
    </section>
    <section id="technologies" data-aos="fade-up">
      <Technologies />
    </section>

    <script>
      fetch("https://api.ipify.org?format=json")
        .then((r) => r.json())
        .then(console.log);
      console.log(import.meta.env);

      document
        .getElementById("scroll-button")!
        .addEventListener("click", () => {
          const next = document.getElementById("aboutme");

          if (next) {
            const pos = next.getBoundingClientRect().top + window.scrollY - 80;
            window.scrollTo({ top: pos, behavior: "smooth" });
          }
        });
    </script>
  </main>
  <Footer />
</Layout>

<script>
  import { animate, stagger } from "motion";

  animate(".icons li", { opacity: 1, y: [50, 0] }, { delay: stagger(0.05) });
  animate(".name", { opacity: [0, 1], x: [-100, 0] }, { delay: stagger(0.1) });
  animate(".title", { opacity: [0, 1], y: [50, 0] }, { delay: 0.5 });
  animate(".profile", { opacity: [0, 1], scale: [0.8, 1] }, { delay: 0.5 });
</script>
