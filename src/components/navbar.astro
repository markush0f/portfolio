<nav
  id="navbar"
  class="fixed w-full flex justify-between items-center gap-4 p-5 z-50
    sm:justify-start sm:left-auto sm:right-0 sm:translate-x-0 transition-all duration-100
    left-1/2 transform -translate-x-1/2 sm:mx-0 px-10 max-w-full"
>
  <div
    id="scroll-content"
    class="mr-auto lg:ml-20 flex items-center opacity-0 transform -translate-y-4 transition-all duration-300"
  >
    <img src="profile.jpeg" alt="profile" class="w-14 rounded-full" />
    <h1 class="ml-4 lg:text-xl text-sm md:text-lg">Markus Abramian Medina</h1>
  </div>
  <button
    id="menu-toggle"
    class="sm:hidden p-2 focus:outline-none transform transition-all duration-300 hover:scale-110"
  >
    <img src="icons/menu.svg" alt="menu" class="w-8" />
  </button>
  <div
    id="menu"
    class="hidden fixed top-20 left-0 right-0 w-full sm:border-b-0 sm:rounded-none border-b rounded-b flex-col pb-2 bg-[#1e1e1e] items-center z-40 sm:flex sm:flex-row sm:static sm:bg-transparent sm:shadow-none sm:w-auto"
  >
    <button
      id="nav-home"
      class="nav-item transform transition-all duration-300 hover:scale-110 hover:text-highlighted p-2"
    >
      Home
    </button>
    <button
      id="nav-aboutme"
      class="nav-item p-2 transform transition-all duration-300 hover:scale-110 hover:text-highlighted flex sm:inline-flex"
    >
      About <span class="ml-1">me</span>
    </button>
    <button
      id="nav-experience"
      class="nav-item transform transition-all duration-300 hover:scale-110 hover:text-highlighted p-2"
    >
      Experience
    </button>
    <button
      id="nav-projects"
      class="nav-item transform transition-all duration-300 hover:scale-110 hover:text-highlighted p-2"
    >
      Projects
    </button>
    <div
      class="relative group transform transition-all duration-300 hover:scale-110"
    >
      <img src="icons/cv.svg" alt="cv" class="w-8 sm:ml-4" />
      <div
        class="absolute top-10 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 bg-black text-white text-xs rounded py-1 px-2 w-auto"
      >
        Download CV
      </div>
    </div>
  </div>
</nav>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const navbar = document.getElementById("navbar");
    const scrollContent = document.getElementById("scroll-content");
    const menuToggle = document.getElementById("menu-toggle");
    const menu = document.getElementById("menu");
    const links = {
      home: document.getElementById("nav-home"),
      experience: document.getElementById("nav-experience"),
      projects: document.getElementById("nav-projects"),
      aboutme: document.getElementById("nav-aboutme"),
    };

    function activateLink(link) {
      Object.keys(links).forEach((key) =>
        links[key].classList.remove("text-highlighted")
      );
      link.classList.add("text-highlighted");
    }

    function handleScroll() {
      if (window.scrollY > 400 || window.innerWidth < 680) {
        navbar.classList.add("bg-[#1e1e1e]");
        scrollContent.classList.add("opacity-100", "translate-y-0");
        scrollContent.classList.remove("opacity-0", "-translate-y-4");
      } else {
        navbar.classList.remove("bg-[#1e1e1e]");
        scrollContent.classList.add("opacity-0", "-translate-y-4");
        scrollContent.classList.remove("opacity-100", "translate-y-0");
      }

      // Determine which section is currently in view
      const sections = ["home", "experience", "projects", "aboutme"];
      let currentSection = "home";

      sections.forEach((section) => {
        const el = document.getElementById(section);
        if (el && window.scrollY >= el.offsetTop - 200) {
          currentSection = section;
        }
      });

      activateLink(links[currentSection]);
    }

    window.addEventListener("scroll", handleScroll);

    menuToggle.addEventListener("click", function () {
      menu.classList.toggle("hidden");
      menu.classList.toggle("flex");
    });
  });
</script>
